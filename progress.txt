## Task: Implement Offline Order Creation

### What was done:
1. Created `src/hooks/useOfflineOrderCreation.ts` - A custom hook that:
   - Manages offline order creation, storage, and sync lifecycle
   - Stores orders in IndexedDB (via existing `idb.ts` infrastructure) when offline
   - Syncs orders to Supabase `orders` and `order_items` tables when online
   - Uses idempotency keys to prevent duplicate order creation
   - Provides automatic sync on network restoration
   - Exposes retry and remove operations for failed orders
   - Integrates with existing `offlineQueue` for robust retry with backoff

2. Created `src/pages/admin/OfflineOrderCreate.tsx` - A full admin page that:
   - Loads products from Supabase (online) or IndexedDB cache (offline)
   - Caches products in IndexedDB on load for offline availability
   - Provides product search by name/SKU with add-to-cart functionality
   - Includes customer details form (name, phone, email, address, notes)
   - Shows cart with quantity adjustment, item removal, and total calculation
   - Displays clear online/offline status indicators
   - Has two tabs: "New Order" (creation form) and "Pending Orders" (sync queue)
   - Shows pending orders with status badges, retry, and remove actions
   - Works fully offline with graceful degradation

3. Updated `src/pages/admin/Orders.tsx` to:
   - Add "Offline Order" button in the header linking to offline order creation

4. Updated `src/App.tsx` to:
   - Add lazy import for `OfflineOrderCreate` page
   - Add route `orders/offline-create` in admin routes

5. Updated `src/lib/queryKeys.ts` to:
   - Add `offline` query key under orders for tenant-scoped offline order queries

6. Fixed pre-existing build error in `src/lib/utils/sanitize.ts`:
   - Added `sanitizeBasicHtml` export alias (was imported but not exported)

### Architecture:
- **Storage**: IndexedDB (encrypted via existing `clientEncryption`) for offline orders
- **Sync**: Direct Supabase insert when online; queued via `offlineQueue` when offline
- **Products Cache**: Products loaded from Supabase are cached in IndexedDB for offline use
- **Network Detection**: `navigator.onLine` + event listeners for real-time status
- **Idempotency**: UUID-based keys prevent duplicate order creation on retry

### Acceptance Criteria Met:
- [x] Orders can be created while completely offline
- [x] Products are cached locally for offline product selection
- [x] Orders sync automatically when connectivity is restored
- [x] Failed syncs can be retried manually
- [x] Pending offline orders are visible with status indicators
- [x] Build passes with no TypeScript errors

### Files Changed:
- `src/hooks/useOfflineOrderCreation.ts` (new)
- `src/pages/admin/OfflineOrderCreate.tsx` (new)
- `src/pages/admin/Orders.tsx` (modified - added Offline Order button)
- `src/App.tsx` (modified - added lazy import and route)
- `src/lib/queryKeys.ts` (modified - added offline query key)
- `src/lib/utils/sanitize.ts` (modified - fixed pre-existing missing export)

---

## Task: Add Breadcrumb Navigation Between Panels

### What was done:
1. Created `src/components/admin/Breadcrumbs.tsx` - A dedicated breadcrumb navigation component that:
   - Shows Home icon linking to Dashboard
   - Parses URL path segments into readable breadcrumb labels
   - Uses a comprehensive SEGMENT_LABELS map for human-readable display names (hubs, pages, etc.)
   - Falls back to Title Case formatting for unknown segments
   - Highlights current page (non-clickable, bold font)
   - All intermediate segments are clickable links for navigation
   - Hides on dashboard (root) since it's unnecessary there
   - Uses proper aria attributes for accessibility

2. Updated `src/pages/admin/AdminLayout.tsx` to:
   - Replace inline breadcrumb logic with the new `Breadcrumbs` component
   - Remove unused imports (Link, useNavigate, ChevronRight)
   - Simplify mobile title display using a local helper function
   - Breadcrumbs now show on all admin pages via the shared layout

### Acceptance Criteria Met:
- [x] Breadcrumbs show on all admin pages (via AdminLayout integration)
- [x] Links navigate correctly (each intermediate segment links to proper admin route)
- [x] Current page highlighted (font-medium, text-foreground, non-clickable)

### Files Changed:
- `src/components/admin/Breadcrumbs.tsx` (new)
- `src/pages/admin/AdminLayout.tsx` (modified)
