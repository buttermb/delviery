

# Fix Static Menu Page: Data Access + Visual Redesign

## Problem 1: No data loads (RLS blocking anonymous access)

The `/page/:token` route is public (no login required), but the database tables have Row Level Security policies that only allow **authenticated** users to read data. Anonymous visitors get empty results, so nothing renders.

Tables affected:
- `disposable_menus` -- has a permissive `true` policy but it's scoped to authenticated users
- `disposable_menu_products` -- same, requires authentication
- `wholesale_inventory` -- only allows admin role or tenant users

### Fix: Add public SELECT policies scoped to active menus

Add narrow RLS policies that allow anonymous reads **only** for active menu data accessed via a valid token:

```sql
-- Allow public read of active disposable menus by token
CREATE POLICY "Public can view active menus by token"
  ON disposable_menus FOR SELECT
  USING (status = 'active');

-- Allow public read of menu products for active menus
CREATE POLICY "Public can view products for active menus"
  ON disposable_menu_products FOR SELECT
  USING (
    menu_id IN (
      SELECT id FROM disposable_menus WHERE status = 'active'
    )
  );

-- Allow public read of wholesale inventory referenced by active menu products
CREATE POLICY "Public can view inventory for active menu products"
  ON wholesale_inventory FOR SELECT
  USING (
    id IN (
      SELECT product_id FROM disposable_menu_products
      WHERE menu_id IN (
        SELECT id FROM disposable_menus WHERE status = 'active'
      )
    )
  );
```

These are scoped: only products on active menus are visible. No other inventory is exposed.

## Problem 2: Visual redesign to match snacktimemenu.com style

Redesign `src/pages/public/StaticMenuPage.tsx` to render a modern, mobile-first menu similar to the reference site:

- **Large product images** displayed full-width in cards (not small thumbnails)
- **Bold product names** with category badges
- **Price displayed prominently** in accent color
- **Product descriptions** shown below name
- **Clean card layout** with rounded corners and subtle shadows
- **Category grouping** -- group products by category with section headers
- **Mobile-optimized** padding and font sizes
- **Footer** with "Generated by FloraIQ" branding

### Updated component structure:
1. Header section with menu name and item count
2. Optional custom message banner
3. Products grouped by category, each with:
   - Full-width image (if available)
   - Product name (bold, larger text)
   - Category badge
   - Price in green accent color
   - Description text
4. Contact info section
5. Footer

## Files Changed

| File | Change |
|------|--------|
| Database migration | 3 new RLS policies for public menu access |
| `src/pages/public/StaticMenuPage.tsx` | Redesign UI to card-based layout with large images, category grouping |

